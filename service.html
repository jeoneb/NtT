<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì„±ì‹ ì—¬ëŒ€ ìº í¼ìŠ¤ ì§€ë„</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: #fdfdfd;
    }
    h1 {
      color: #8e44ad;
      text-align: center;
      margin-top: 20px;
    }
    .legend {
      margin: 0 auto;
      margin-top: 10px;
      width: 90%;
      max-width: 600px;
      background: #f8f8fc;
      border-radius: 8px;
      padding: 10px 16px;
      display: flex;
      gap: 16px;
      justify-content: center;
      font-size: 15px;
    }
    .legend span {
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }
    #map {
      width: 100%;
      height: 500px;
      margin-top: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .info-content {
      padding: 8px 14px;
      background: white;
      border: 1px solid #888;
      border-radius: 10px;
      font-size: 14px;
      color: #2c3e50;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      white-space: nowrap;
    }
    .facility-btn {
      display: inline-block;
      margin: 5px 5px 0 0;
      padding: 4px 8px;
      font-size: 13px;
      color: white;
      background: #8e44ad;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .back-btn {
      margin-top: 8px;
      padding: 4px 8px;
      font-size: 13px;
      color: #8e44ad;
      background: #f8f8fc;
      border: 1px solid #8e44ad;
      border-radius: 6px;
      cursor: pointer;
    }
    .facility-list {
      margin-top: 8px;
      font-size: 13px;
      color: #333;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>ì„±ì‹ ì—¬ëŒ€ ìº í¼ìŠ¤ ì§€ë„ ğŸ—ºï¸</h1>
  <div class="legend">
    <span id="btn-toilet">ğŸš» í™”ì¥ì‹¤</span>
    <span id="btn-vending">ğŸ¥¤ ìíŒê¸°</span>
    <span id="btn-water">ğŸ’§ ì •ìˆ˜ê¸°</span>
  </div>
  <div id="map"></div>

  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3bb811d698d8473f798fd1840a970d74&autoload=true"></script>

  <script>
    const container = document.getElementById('map');
    const options = {
      center: new kakao.maps.LatLng(37.591306, 127.022139),
      level: 2
    };
    const map = new kakao.maps.Map(container, options);
        const buildings = [
      {
        name: 'ë‚œí–¥ê´€',
        position: new kakao.maps.LatLng(37.592253, 127.021268),
        facilities: {
          toilet: ['1ì¸µ ì—˜ë²  ì˜†(ê¸°ê³„ì‹¤) ì˜†', '3ì¸µ 302í˜¸ ì˜†', '5ì¸µ 501í˜¸ ì˜†', '6ì¸µ 603í˜¸ ì˜†', '7ì¸µ 702í˜¸ ì˜†', '8ì¸µ 803í˜¸ ì˜†'],
          vending: ['4ì¸µ ì—˜ë²  ì•', '7ì¸µ ì—˜ë²  ì•'],
          water: ['2ì¸µ ì—˜ë²  ì•', '5ì¸µ ì—˜ë²  ì•', '7ì¸µ ì—˜ë²  ì•']
        }
      },
      {
        name: 'í–‰ì •ê´€&ì¤‘ì•™ë°•ë¬¼ê´€',
        position: new kakao.maps.LatLng(37.591536, 127.021223),
        facilities: {
          toilet: ['1ì¸µ ê±°ìš¸ ì•', '2ì¸µ 202í˜¸ ì˜†', '3ì¸µ 301í˜¸ ì˜†', '4ì¸µ 402í˜¸ ì˜†'],
          vending: [],
          water: []
        }
      },
      {
        name: 'ì¡°í˜• 2ê´€',
        position: new kakao.maps.LatLng(37.592232, 127.021700),
        facilities: {
          toilet: ['1ì¸µ 103í˜¸ ì˜†', '2ì¸µ ê³„ë‹¨ ì•', '3ì¸µ ê³„ë‹¨ ì•', '4ì¸µ ê³„ë‹¨ ì•'],
          vending: ['1ì¸µ 107í˜¸ ì˜†'],
          water: ['1ì¸µ 107í˜¸ ì˜†', '2ì¸µ ê³„ë‹¨ ì•', '3ì¸µ 303í˜¸ ì•', '4ì¸µ 404í˜¸ ì•']
        }
      },
      {
        name: 'ìŒì•…ê´€',
        position: new kakao.maps.LatLng(37.591978, 127.022191),
        facilities: {
          toilet: ['1ì¸µ ì‚¬ë¬¼í•¨ ì˜†', '2ì¸µ ì‚¬ë¬¼í•¨ ì˜†'],
          vending: [],
          water: ['1ì¸µ 101í˜¸ ì•', '2ì¸µ 209í˜¸ ì•', '3ì¸µ 312í˜¸ ì˜†', '4ì¸µ', '5ì¸µ 528í˜¸ ì˜†']
        }
      },
      {
        name: 'ìˆ˜ì •ê´€',
        position: new kakao.maps.LatLng(37.5911993, 127.0228533),
        facilities: {
          toilet: ['1ì¸µ Aì—˜ë¦¬ë² ì´í„° ì˜†', '1ì¸µ Cì—˜ë¦¬ë² ì´í„° ì˜† ì„œë¹„ìŠ¤ ì„¼í„° ì˜†', '2ì¸µ Aì—˜ë¦¬ë² ì´í„° ì•', '2ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†', '2ì¸µ Cì—˜ë¦¬ë² ì´í„° ì•', '3ì¸µ Aì—˜ë¦¬ë² ì´í„° ì•', '3ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†', '3ì¸µ Cì—˜ë¦¬ë² ì´í„° ì•', '4ì¸µ Aì—˜ë¦¬ë² ì´í„° ì•', '4ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†', '4ì¸µ Cì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 5ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 6ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 7ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 8ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 9ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Aë™ 10ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 5ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 6ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 7ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 8ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 9ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Bë™ 10ì¸µ ì—˜ë²  ì•', 'Cë™ 5ì¸µ ì—˜ë¦¬ë² ì´í„° ì•', 'Cë™ 6ì¸µ ì—˜ë¦¬ë² ì´í„° ì•'],
          vending: ['1ì¸µ Aì—˜ë¦¬ë² ì´í„° ìª½ ë³µì‚¬ì‹¤ ì•', '4ì¸µ ìˆ˜ì •í™€ ì˜†'],
          water: ['1ì¸µ Aì—˜ë¦¬ë² ì´í„° ìª½ ë³µì‚¬ì‹¤ ì•', '1ì¸µ ëŒ€í•™ ì¼ìë¦¬ Cì—˜ë¦¬ë² ì´í„° ì˜† ì„œë¹„ìŠ¤ ì„¼í„° ì˜†', '2ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†', '3ì¸µ Aì—˜ë¦¬ë² ì´í„° ì•', '3ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†', '3ì¸µ Cì—˜ë¦¬ë² ì´í„° ì•', '4ì¸µ Bì—˜ë¦¬ë² ì´í„° ì˜†']
        }
      },
      {
        name: 'ì„±ì‹ ì—­ì‚¬ê´€',
        position: new kakao.maps.LatLng(37.591599, 127.022076),
        facilities: {
          toilet: ['1ì¸µ í™”ì¥ì‹¤ ë³¸ì…êµ¬ ì˜†', '1ì¸µ ì—˜ë ˆë² ì´í„° ì˜†', '1ì¸µ 110í˜¸ ì˜†', '2ì¸µ 212í˜¸ ì•', '3ì¸µ 310í˜¸ ì•', '4ì¸µ 409í˜¸ ì•', '5ì¸µ í™”ì¥ì‹¤ 502í˜¸ ìƒë‹´ë§ˆë£¨ ì•', '6ì¸µ í™”ì¥ì‹¤ 612í˜¸ ìŠ¤ë§ˆíŠ¸ í´ë˜ìŠ¤ë£¸ ì•', '7ì¸µ í™”ì¥ì‹¤ 712í˜¸ ì•', '8ì¸µ í™”ì¥ì‹¤ 820~821í˜¸ ì•', '9ì¸µ í™”ì¥ì‹¤ 936í˜¸ ì•', '10ì¸µ í™”ì¥ì‹¤ 1030í˜¸ ì•'],
          vending: ['7ì¸µ 712í˜¸ ì•', '8ì¸µ 821í˜¸ ì•'],
          water: ['2ì¸µ 212í˜¸ ì•', '3ì¸µ 311í˜¸ ì•', '5ì¸µ 502í˜¸ ìƒë‹´ë§ˆë£¨ ì•', '6ì¸µ 613í˜¸ ì„±ì‹ ìŠ¤í„°ë””ë£¸ ì•', '7ì¸µ 712~713í˜¸ ì‚¬ì´ ì•', '8ì¸µ 821~822í˜¸ ì‚¬ì´ ì•']
        }
      },
      {
        name: 'ì¤‘ì•™ë„ì„œê´€',
        position: new kakao.maps.LatLng(37.590830, 127.021616),
        facilities: {
          toilet: ['1ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '2ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†(ìˆ˜í•˜ë‘ ì•)', '3ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '4ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†(ìˆ˜í•˜ë‘ ì•)', '5ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '6ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†(ìˆ˜í•˜ë‘ ì•)', '7ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†(ìˆ˜í•˜ë‘ ì•)'],
          vending: [],
          water: ['1ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '2ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '3ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '4ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '5ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '6ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†', '7ì¸µ ì—˜ë¦¬ë² ì´í„° ì˜†']
        }
      },
      {
        name: 'ì²´ìœ¡ê´€',
        position: new kakao.maps.LatLng(37.590600, 127.021900),
        facilities: {
          toilet: ['2ì¸µ ì •ìˆ˜ê¸° ì•', 'ì„¼í„°ì…êµ¬ ì˜†'],
          vending: [],
          water: ['íœ˜í‹°ë‹ˆìŠ¤ ì„¼í„° ì…êµ¬']
        }
      }
    ];

    let openInfoWindow = null;

    buildings.forEach(building => {
      const marker = new kakao.maps.Marker({
        map: map,
        position: building.position,
        title: building.name
      });

      const content = document.createElement('div');
      content.className = 'info-content';
      content.innerHTML = `<b>${building.name}</b><br>
        <button class="facility-btn" onclick="showFacility('${building.name}', 'toilet')">ğŸš» í™”ì¥ì‹¤</button>
        <button class="facility-btn" onclick="showFacility('${building.name}', 'vending')">ğŸ¥¤ ìíŒê¸°</button>
        <button class="facility-btn" onclick="showFacility('${building.name}', 'water')">ğŸ’§ ì •ìˆ˜ê¸°</button>
        <div class="facility-list" id="list-${building.name}"></div>
        <button class="back-btn" onclick="closeInfoWindow()">ë’¤ë¡œê°€ê¸°</button>`;

      const infoWindow = new kakao.maps.CustomOverlay({
        content: content,
        position: building.position,
        yAnchor: 1.2
      });

      kakao.maps.event.addListener(marker, 'click', function() {
        if (openInfoWindow) openInfoWindow.setMap(null);
        infoWindow.setMap(map);
        openInfoWindow = infoWindow;
      });
    });
        // ì´ëª¨ì§€ ë§ˆì»¤ í‘œì‹œ (ìƒë‹¨ ë²„íŠ¼)
    let overlayMarkers = [];
    const toiletBuildings = ['ë‚œí–¥ê´€', 'í–‰ì •ê´€&ì¤‘ì•™ë°•ë¬¼ê´€', 'ì¡°í˜• 2ê´€', 'ìŒì•…ê´€', 'ìˆ˜ì •ê´€', 'ì„±ì‹ ì—­ì‚¬ê´€', 'ì¤‘ì•™ë„ì„œê´€', 'ì²´ìœ¡ê´€'];
    const vendingBuildings = ['ë‚œí–¥ê´€', 'ì¡°í˜• 2ê´€', 'ìˆ˜ì •ê´€', 'ì„±ì‹ ì—­ì‚¬ê´€'];
    const waterBuildings = ['ë‚œí–¥ê´€', 'ì¡°í˜• 2ê´€', 'ìŒì•…ê´€', 'ìˆ˜ì •ê´€', 'ì„±ì‹ ì—­ì‚¬ê´€', 'ì¤‘ì•™ë„ì„œê´€', 'ì²´ìœ¡ê´€'];

    function showOverlay(type) {
      overlayMarkers.forEach(marker => marker.setMap(null));
      overlayMarkers = [];

      let targetBuildings = [];
      let icon = '';
      if (type === 'toilet') {
        targetBuildings = toiletBuildings;
        icon = 'ğŸš»';
      } else if (type === 'vending') {
        targetBuildings = vendingBuildings;
        icon = 'ğŸ¥¤';
      } else if (type === 'water') {
        targetBuildings = waterBuildings;
        icon = 'ğŸ’§';
      }

      buildings.forEach(building => {
        if (targetBuildings.includes(building.name)) {
          const content = `<div style="font-size: 24px; transform: translate(-50%, -100%);">${icon}</div>`;
          const overlay = new kakao.maps.CustomOverlay({
            content: content,
            position: building.position
          });
          overlay.setMap(map);
          overlayMarkers.push(overlay);
        }
      });
    }

    document.getElementById('btn-toilet').addEventListener('click', () => showOverlay('toilet'));
    document.getElementById('btn-vending').addEventListener('click', () => showOverlay('vending'));
    document.getElementById('btn-water').addEventListener('click', () => showOverlay('water'));

    // ì‹œì„¤ ëª©ë¡ í‘œì‹œ í•¨ìˆ˜
    function showFacility(buildingName, type) {
      const building = buildings.find(b => b.name === buildingName);
      const listDiv = document.getElementById(`list-${buildingName}`);
      if (!building || !listDiv) return;

      const items = building.facilities[type];
      if (!items || items.length === 0) {
        listDiv.innerHTML = `<p style="margin-top:5px;">ì •ë³´ ì—†ìŒ</p>`;
        return;
      }

      let html = '<ul style="margin:5px 0; padding-left:16px;">';
      items.forEach(loc => {
        html += `<li>${loc}</li>`;
      });
      html += '</ul>';

      listDiv.innerHTML = html;
    }

    // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í•¨ìˆ˜
    function closeInfoWindow() {
      if (openInfoWindow) {
        openInfoWindow.setMap(null);
        openInfoWindow = null;
      }
    }
  </script>
</body>
</html>
